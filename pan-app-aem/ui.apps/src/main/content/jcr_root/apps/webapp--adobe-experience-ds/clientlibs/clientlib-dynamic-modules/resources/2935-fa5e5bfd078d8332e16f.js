"use strict";(self.webpackChunkwebapp_adobe_experience_ds=self.webpackChunkwebapp_adobe_experience_ds||[]).push([[2935,9632],{173:function(t,e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,o){function i(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,s)}c((r=r.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReCaptchaInstance=void 0;var a=function(){function t(t,e,n){this.siteKey=t,this.recaptchaID=e,this.recaptcha=n,this.styleContainer=null}return t.prototype.execute=function(t){return n(this,void 0,void 0,function(){var e;return r(this,function(n){switch(n.label){case 0:return this.recaptcha.enterprise?[4,this.recaptcha.enterprise.execute(this.recaptchaID,{action:t})]:[3,2];case 1:return e=n.sent(),[3,4];case 2:return[4,this.recaptcha.execute(this.recaptchaID,{action:t})];case 3:e=n.sent(),n.label=4;case 4:return[2,e]}})})},t.prototype.getSiteKey=function(){return this.siteKey},t.prototype.hideBadge=function(){null===this.styleContainer&&(this.styleContainer=document.createElement("style"),this.styleContainer.innerHTML=".grecaptcha-badge{visibility:hidden !important;}",document.head.appendChild(this.styleContainer))},t.prototype.showBadge=function(){null!==this.styleContainer&&(document.head.removeChild(this.styleContainer),this.styleContainer=null)},t}();e.ReCaptchaInstance=a},2935:function(t,e,n){n.r(e),n.d(e,{NpsAquisicaoSendData:function(){return s}});var r=n(9632),a=n(6590),o=function(t,e,n,r){return new(n||(n=Promise))(function(a,o){function i(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,s)}c((r=r.apply(t,e||[])).next())})},i=function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},s=function(){function t(){var t=this;this.recaptchaResponse="",this.$npsAquisicaoEndPoint=document.querySelector("[data-js=nps-endpoint-input]"),this.urlParamsCpf=new URLSearchParams(window.location.search),this.urlParamsProduct=new URLSearchParams(window.location.search),this.$npsTestimonyValue=document.querySelector("[data-js=nps-aquisicao-depoimento]"),this.$wrapperErroFlow=document.querySelector("[data-js=nps-aquisicao-fluxo-erro]"),this.$wrapperMainStream=document.querySelector("[data-js=nps-aquisicao-fluxo-principal]"),this.$wrapperLastStep=document.querySelector(".nps-aquisicao__wrapper-last-step"),this.$wrapperSuccess=document.querySelector(".nps-aquisicao__wrapper-success"),this.$flowErrorResquest=document.querySelector("[data-js=nps-aquisicao-fluxo-erro-manutencao]"),this.$optionsCheckboxInput=document.querySelectorAll("[data-js=nps-aquisicao-options-input]"),this.$optionsOtherInput=document.querySelectorAll("[data-js=nps-aquisicao-options-other-input]"),this.$nextStep1Button=document.querySelector("[data-js=nps-aquisicao-button-step-1]"),this.$nextStep2Button=document.querySelector("[data-js=nps-aquisicao-button-step-2]"),this.$nextStep3Button=document.querySelector("[data-js=nps-aquisicao-button-step-3]"),this.$nextStep4Button=document.querySelector("[data-js=nps-aquisicao-button-step-4]"),this.$nextStep5Button=document.querySelector("[data-js=nps-aquisicao-button-step-5]"),this.$otherOptionButton=document.querySelectorAll("[data-js=nps-aquisicao-other-option-btn]"),this.$finishQuizButton=document.querySelector("[data-submit=nps-aquisicao-button-submit]"),this.$npsScoreButtons=document.querySelectorAll(".nps-aquisicao__score-list > .nps-aquisicao__score-list-item > button"),this.$npsScoreButtons2=document.querySelectorAll(".nps-aquisicao__score-list--2 > .nps-aquisicao__score-list-item > button"),this.selectedOptionsValuesArray=[],this.selectedTextInputValuesArray=[],this.data={CPF:this.urlParamsCpf.get("c"),PRODUTO:this.urlParamsProduct.get("pr"),NOTA:"",COMENTARIO:"",CONCORRENCIA:"",MOTIVACAO:"",FACILIDADE:"",ONDE_CONHECEU:"",ORIGEM:this.urlParamsProduct.get("utm_source"),CONCORRENCIA_OUTROS:"",MOTIVACAO_OUTROS:"",ORIGEM_OUTROS:""},this.$npsConcorrencia="",this.$npsMotivacao="",this.$npsOndeConheceu="",this.$npsConcorrenciaOutros="",this.$npsMotivacaoOutros="",this.$npsOndeConheceuOutros="",this.$formLeadVersion=document.querySelector("[data-js=nps-captcha-version]"),this.$formLeadSiteKey=document.querySelector("[data-js=nps-captcha-siteKey]"),this.handleSubmit=function(){t.isCaptchaValid&&(t.$finishQuizButton.querySelector("button").innerText="Enviando...",t.sendFormData())},this.addActiveClassOptionButton=function(){t.$wrapperOptions.forEach(function(e,n){var r=document.querySelector("[data-js=nps-aquisicao-button-step-".concat(n+4,"]"));e.querySelectorAll("[data-js=nps-aquisicao-options-input]").forEach(function(o){o.addEventListener("change",function(){switch(o.parentElement.classList.toggle("active"),t.selectedOptionsValuesArray=[],e.querySelectorAll("[data-js=nps-aquisicao-options-input]").forEach(function(e){e.checked&&t.selectedOptionsValuesArray.push(e.value)}),n){case 0:t.data.CONCORRENCIA=t.selectedOptionsValuesArray.join(" "),t.$nextStep4Button.setAttribute("data-track",t.nextStep4Tracker+"".concat(t.selectedOptionsValuesArray.join("/").normalize("NFD").replace(/[\u0300-\u036f]/g,"")));break;case 1:t.data.MOTIVACAO=t.selectedOptionsValuesArray.join(" "),t.$nextStep5Button.setAttribute("data-track",t.nextStep5Tracker+="".concat(t.selectedOptionsValuesArray.join("/").normalize("NFD").replace(/[\u0300-\u036f]/g,"")));break;case 2:t.data.ONDE_CONHECEU=t.selectedOptionsValuesArray.join(" ")}a(r,t.selectedOptionsValuesArray,t.selectedTextInputValuesArray)})}),e.querySelectorAll("[data-js=nps-aquisicao-options-other-input]").forEach(function(e){e.querySelector("input").addEventListener("input",function(){var o=e.querySelector("input").value.trim();switch(t.selectedTextInputValuesArray=o?[o]:[],n){case 0:t.data.CONCORRENCIA.includes("Outros")||(t.data.CONCORRENCIA+=" Outros"),t.data.CONCORRENCIA_OUTROS=o,t.$nextStep4Button.setAttribute("data-track",t.nextStep4Tracker+"Outros");break;case 1:t.data.MOTIVACAO.includes("Outros")||(t.data.MOTIVACAO+=" Outros"),t.data.MOTIVACAO_OUTROS=o,t.$nextStep5Button.setAttribute("data-track",t.nextStep5Tracker+"Outros");break;case 2:t.data.ONDE_CONHECEU.includes("Outros")||(t.data.ONDE_CONHECEU+=" Outros"),t.data.ORIGEM_OUTROS=o}a(r,t.selectedOptionsValuesArray,t.selectedTextInputValuesArray)})});var a=function(t,e,n){0===e.length&&0===n.length?t.setAttribute("disabled","true"):t.removeAttribute("disabled")}})},this.showOtherOptionInput=function(){t.$otherOptionButton.forEach(function(t){t.addEventListener("click",function(){t.parentElement.classList.toggle("active"),t.classList.toggle("active")})})},this.choiceScore=function(){t.$npsScoreButtons.forEach(function(e){e.addEventListener("click",function(){t.$npsScoreButtons.forEach(function(t){t.classList.remove("active")}),t.$npsScore=e.value,t.$nextStep1Button.setAttribute("data-track",t.nextStep1Tracker+t.$npsScore),t.data.NOTA=t.$npsScore,t.$nextStep1Button.setAttribute("disabled","false"),e.classList.add("active")})})},this.choiceScore2=function(){t.$npsScoreButtons2.forEach(function(e){e.addEventListener("click",function(){t.$npsScoreButtons2.forEach(function(t){t.classList.remove("active")}),t.$npsScore2=e.value,t.$nextStep3Button.setAttribute("data-track",t.nextStep1Tracker+t.$npsScore2),t.data.FACILIDADE=t.$npsScore2,t.$nextStep3Button.setAttribute("disabled","false"),e.classList.add("active")})})},this.getTestimonyValue=function(){t.data.COMENTARIO=t.$npsTestimonyValue.querySelector("textarea").value},this.npsAquisicaoUrlParamns=new r.NpsAquisicaoUrlParams,this.$wrapperOptions=Array.from(document.querySelectorAll("[data-js=nps-aquisicao-options-container]")),setTimeout(function(){t.getCaptchaToken(),t.initFormEvent()},1e3)}return t.prototype.getCaptchaToken=function(){var t;return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,(0,a.Hh)(null===(t=this.$formLeadSiteKey)||void 0===t?void 0:t.value,{useEnterprise:!0})];case 1:return[4,n.sent().execute("SIGNUP")];case 2:return e=n.sent(),this.recaptchaResponse=e,e&&(this.isCaptchaValid=!0),[2]}})})},t.prototype.initFormEvent=function(){var t=this;this.currentIndex=0,this.nextStep1Tracker=this.$nextStep1Button.getAttribute("data-track"),this.nextStep2Tracker=this.$nextStep2Button.getAttribute("data-track"),this.nextStep3Tracker=this.$nextStep3Button.getAttribute("data-track"),this.nextStep4Tracker=this.$nextStep4Button.getAttribute("data-track"),this.nextStep5Tracker=this.$nextStep5Button.getAttribute("data-track"),this.nextStep6Tracker=this.$nextStep5Button.getAttribute("data-track"),this.$finishQuizButton.addEventListener("click",function(e){e.preventDefault(),t.handleSubmit()}),this.$npsTestimonyValue.querySelector("textarea").addEventListener("blur",function(){t.getTestimonyValue()}),this.$nextStep2Button.addEventListener("click",function(){t.$nextStep2Button.setAttribute("data-track",t.nextStep2Tracker+(t.$npsTestimonyValue.querySelector("textarea").value?"ComTexto":"SemTexto"))}),this.choiceScore(),this.choiceScore2(),this.showOtherOptionInput(),this.addActiveClassOptionButton()},t.prototype.sendFormData=function(){var t,e=this,n=this.$npsAquisicaoEndPoint.value,r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Authorization-Captcha":this.recaptchaResponse,SiteKey:null===(t=this.$formLeadSiteKey)||void 0===t?void 0:t.value},body:JSON.stringify(this.data)};fetch(n,r).then(function(t){t.status>=200&&t.status<400?e.handleSuccess():e.handleError()}).catch(function(){e.handleError()})},t.prototype.handleSuccess=function(){this.$wrapperSuccess.classList.add("nps-aquisicao__success"),this.npsAquisicaoUrlParamns.storeParamsLocally()},t.prototype.handleError=function(){this.$wrapperMainStream.classList.add("d-none"),this.$wrapperErroFlow.classList.remove("d-none"),this.$flowErrorResquest.classList.remove("d-none")},t}()},4461:function(t,e,n){var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.getInstance=e.load=void 0;var a,o=n(173);!function(t){t[t.NOT_LOADED=0]="NOT_LOADED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED"}(a||(a={}));var i=function(){function t(){}return t.load=function(e,n){if(void 0===n&&(n={}),"undefined"==typeof document)return Promise.reject(new Error("This is a library for the browser!"));if(t.getLoadingState()===a.LOADED)return t.instance.getSiteKey()===e?Promise.resolve(t.instance):Promise.reject(new Error("reCAPTCHA already loaded with different site key!"));if(t.getLoadingState()===a.LOADING)return e!==t.instanceSiteKey?Promise.reject(new Error("reCAPTCHA already loaded with different site key!")):new Promise(function(e,n){t.successfulLoadingConsumers.push(function(t){return e(t)}),t.errorLoadingRunnable.push(function(t){return n(t)})});t.instanceSiteKey=e,t.setLoadingState(a.LOADING);var r=new t;return new Promise(function(i,s){r.loadScript(e,n.useRecaptchaNet||!1,n.useEnterprise||!1,n.renderParameters?n.renderParameters:{},n.customUrl).then(function(){t.setLoadingState(a.LOADED);var s=r.doExplicitRender(grecaptcha,e,n.explicitRenderParameters?n.explicitRenderParameters:{},n.useEnterprise||!1),c=new o.ReCaptchaInstance(e,s,grecaptcha);t.successfulLoadingConsumers.forEach(function(t){return t(c)}),t.successfulLoadingConsumers=[],n.autoHideBadge&&c.hideBadge(),t.instance=c,i(c)}).catch(function(e){t.errorLoadingRunnable.forEach(function(t){return t(e)}),t.errorLoadingRunnable=[],s(e)})})},t.getInstance=function(){return t.instance},t.setLoadingState=function(e){t.loadingState=e},t.getLoadingState=function(){return null===t.loadingState?a.NOT_LOADED:t.loadingState},t.prototype.loadScript=function(e,n,r,o,i){var s=this;void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o={}),void 0===i&&(i="");var c=document.createElement("script");c.setAttribute("recaptcha-v3-script",""),c.setAttribute("async",""),c.setAttribute("defer","");var u="https://www.google.com/recaptcha/api.js";n?u=r?"https://recaptcha.net/recaptcha/enterprise.js":"https://recaptcha.net/recaptcha/api.js":r&&(u="https://www.google.com/recaptcha/enterprise.js"),i&&(u=i),o.render&&(o.render=void 0);var p=this.buildQueryString(o);return c.src=u+"?render=explicit"+p,new Promise(function(e,n){c.addEventListener("load",s.waitForScriptToLoad(function(){e(c)},r),!1),c.onerror=function(e){t.setLoadingState(a.NOT_LOADED),n(e)},document.head.appendChild(c)})},t.prototype.buildQueryString=function(t){return Object.keys(t).length<1?"":"&"+Object.keys(t).filter(function(e){return!!t[e]}).map(function(e){return e+"="+t[e]}).join("&")},t.prototype.waitForScriptToLoad=function(e,n){var r=this;return function(){void 0===window.grecaptcha?setTimeout(function(){r.waitForScriptToLoad(e,n)},t.SCRIPT_LOAD_DELAY):n?window.grecaptcha.enterprise.ready(function(){e()}):window.grecaptcha.ready(function(){e()})}},t.prototype.doExplicitRender=function(t,e,n,a){var o=r({sitekey:e},n);return n.container?a?t.enterprise.render(n.container,o):t.render(n.container,o):a?t.enterprise.render(o):t.render(o)},t.loadingState=null,t.instance=null,t.instanceSiteKey=null,t.successfulLoadingConsumers=[],t.errorLoadingRunnable=[],t.SCRIPT_LOAD_DELAY=25,t}();e.load=i.load,e.getInstance=i.getInstance},6590:function(t,e,n){e.Hh=void 0;var r=n(4461);Object.defineProperty(e,"Hh",{enumerable:!0,get:function(){return r.load}});var a=n(173)},9632:function(t,e,n){n.r(e),n.d(e,{NpsAquisicaoUrlParams:function(){return r}});var r=function(){function t(){this.$wrapperMainStream=document.querySelector("[data-js=nps-aquisicao-fluxo-principal]"),this.$wrapperErroFlow=document.querySelector("[data-js=nps-aquisicao-fluxo-erro]"),this.$flowAlreadyAnswered=document.querySelector("[data-js=nps-aquisicao-fluxo-erro-respondida]"),this.$expiredLinkFlow=document.querySelector("[data-js=nps-aquisicao-fluxo-erro-link-expirado]");var t=this.getUrlParams(),e=t.cpfParam,n=t.productParam;if(!e||!n)return this.$wrapperMainStream.classList.remove("d-flex"),this.$wrapperMainStream.classList.add("d-none"),this.$wrapperErroFlow.classList.remove("d-none"),this.$wrapperErroFlow.classList.add("d-flex"),void this.$expiredLinkFlow.classList.remove("d-none");this.cpfParam=e,this.productParam=n,this.productParam===localStorage.getItem("pr")?(this.$wrapperMainStream.classList.remove("d-flex"),this.$wrapperMainStream.classList.add("d-none"),this.$wrapperErroFlow.classList.remove("d-none"),this.$wrapperErroFlow.classList.add("d-flex"),this.$flowAlreadyAnswered.classList.remove("d-none")):(this.productParam=localStorage.getItem("pr"),this.productParam=n,this.$wrapperErroFlow.classList.add("d-none"),this.$wrapperMainStream.classList.remove("d-none"),this.$wrapperMainStream.classList.add("d-flex"))}return t.prototype.getUrlParams=function(){var t=new URLSearchParams(window.location.search);return{cpfParam:t.get("c"),productParam:t.get("pr")}},t.prototype.storeParamsLocally=function(){this.cpfParam&&this.productParam&&(localStorage.setItem("c",this.cpfParam),localStorage.setItem("pr",this.productParam))},t}()}}]);