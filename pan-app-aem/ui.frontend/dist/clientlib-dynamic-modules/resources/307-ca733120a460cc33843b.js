(self.webpackChunkwebapp_adobe_experience_ds=self.webpackChunkwebapp_adobe_experience_ds||[]).push([[307],{307:function(e,t,a){"use strict";a.r(t);a(5672);var s=a(440),n=(a(7403),function(e,t,a,s){return new(a||(a=Promise))(function(n,o){function r(e){try{c(s.next(e))}catch(e){o(e)}}function i(e){try{c(s.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a(function(e){e(t)})).then(r,i)}c((s=s.apply(e,t||[])).next())})}),o=function(e,t){var a,s,n,o,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(r=0)),r;)try{if(a=1,s&&(n=2&i[0]?s.return:i[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,i[1])).done)return n;switch(s=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,s=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(n=r.trys,(n=n.length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){r.label=i[1];break}if(6===i[0]&&r.label<n[1]){r.label=n[1],n=i;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(i);break}n[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],s=0}finally{a=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},r=function(){function e(){var e;this.cardsContainer=document.querySelector(".card-estatico-parceiros-shopping__cards-slider"),this.cards="",this.searchInput=document.getElementById("input-card-parceiros-shopping-search"),this.searchButton=document.getElementById("button-card-parceiros-shopping-search"),this.seeMoreButton=document.querySelector("[data-js=button-card-parceiros-shopping-ver-mais]"),this.textsContentHtml=document.querySelector(".card-estatico-parceiros-shopping__text-content"),this.actionsHtml=document.querySelector(".card-estatico-parceiros-shopping__actions"),this.endPoint=document.querySelector("[data-js=endpoint-path]"),this.itemsPerPage=8,this.page=0,this.nameSearch=(null===(e=this.searchInput)||void 0===e?void 0:e.value)||"",this.totalPages=0,this.totalItensRest=0,window.innerWidth<1024&&this.initSliderMobile(),this.searchActions(),this.getMaxCashback(),this.getParceiros(this.page,this.itemsPerPage,this.nameSearch)}return e.prototype.initSliderMobile=function(){var e,t=this,a=new s.RC(".card-estatico-parceiros-shopping__cards-swiper",{slidesPerView:"auto",spaceBetween:24,loop:!1,centeredSlides:!0,modules:[s.dK],pagination:{el:".card-estatico-parceiros-shopping__cards-pagination",type:"bullets",dynamicBullets:!0,dynamicMainBullets:4}});a.on("reachEnd",function(){t.page<t.totalPages-1&&(t.page++,t.itemsPerPage<t.totalItensRest&&(t.itemsPerPage=t.totalItensRest),t.getParceiros(t.page,t.itemsPerPage,t.nameSearch))}),null===(e=this.searchButton)||void 0===e||e.addEventListener("click",function(e){e.preventDefault(),a.slideTo(0)})},e.prototype.cleanFields=function(){this.cardsContainer.innerHTML="",this.cards="",this.totalItensRest=0,this.totalPages=0,this.page=0,this.itemsPerPage=8},e.prototype.searchActions=function(){var e,t,a,s=this;null===(e=this.seeMoreButton)||void 0===e||e.addEventListener("click",function(e){e.preventDefault(),s.seeMoreButton.classList.contains("lastPage")?(s.seeMoreButton.classList.remove("lastPage"),s.seeMoreButton.querySelector(".mahoe-button__label").textContent="Ver mais",s.cleanFields(),s.getParceiros(s.page,s.itemsPerPage,s.nameSearch)):s.page<s.totalPages-1&&(s.page++,s.itemsPerPage<s.totalItensRest&&(s.itemsPerPage=s.totalItensRest),s.page==s.totalPages-2&&(s.seeMoreButton.querySelector(".mahoe-button__label").textContent="Ver menos",s.seeMoreButton.classList.add("lastPage")),s.getParceiros(s.page,s.itemsPerPage,s.nameSearch))}),null===(t=this.searchButton)||void 0===t||t.addEventListener("click",function(e){e.preventDefault(),s.cleanFields(),s.searchButton.classList.contains("buscado")?(s.cleanFields(),s.getParceiros(s.page,s.itemsPerPage,""),s.searchInput.value="",s.searchButton.classList.remove("buscado"),s.searchButton.querySelector(".mahoe-button__label").textContent="Buscar",s.searchButton.disabled=!0):(s.getParceiros(s.page,s.itemsPerPage,s.searchInput.value),s.searchButton.querySelector(".mahoe-button__label").textContent="Limpar pesquisa",s.searchButton.classList.add("buscado"))}),null===(a=this.searchInput)||void 0===a||a.addEventListener("keyup",function(){s.searchInput.value.length>=3?s.searchButton.disabled=!1:s.searchButton.disabled=!0})},e.prototype.getMaxCashback=function(){return n(this,void 0,void 0,function(){var e,t;return o(this,function(a){switch(a.label){case 0:return[4,fetch("".concat(this.endPoint.value,"lojas-parceiras?\n      linkDefined=true&status=APPROVED&page=0&size=1&sort=CASHBACK_RATE&order=DESC"))];case 1:if(!(e=a.sent()).ok||500===e.status)throw this.showErrorMessage("Ops, não conseguimos carregar nossas lojas, acesse o site em instantes"),this.textsContentHtml.remove(),this.actionsHtml.remove(),new Error("HTTP ERROR ** API LOJAS-PARCEIRAS - MAX CASHBACK ONLY **: ".concat(e.status));return[4,e.json()];case 2:return t=a.sent(),this.maxCashback=parseInt(t.lojas[0].cashback).toString()+"%",document.querySelector(".card-estatico-parceiros-shopping__cashback-value").textContent=this.maxCashback,[2]}})})},e.prototype.getParceiros=function(e,t,a){return n(this,void 0,void 0,function(){var s,n,r=this;return o(this,function(o){switch(o.label){case 0:return[4,fetch("".concat(this.endPoint.value,"lojas-parceiras?linkDefined=true&status=APPROVED&page=").concat(e,"&size=").concat(t,"&sort=ORDER_INDEX&order=ASC").concat(a.length>0?"&name="+a:""))];case 1:if(!(s=o.sent()).ok||500===s.status)throw this.showErrorMessage("Ops, não conseguimos carregar nossas lojas, acesse o site em instantes"),this.textsContentHtml.remove(),this.actionsHtml.remove(),new Error("HTTP ERROR ** API LOJAS-PARCEIRAS - TODOS PARCEIROS **: ".concat(s.status));return[4,s.json()];case 2:return!(n=o.sent()).lojas&&a.length>0&&this.showErrorMessage("Ops, a loja que está procurando não é uma parceira do Shopping"),n.lojas.forEach(function(e){r.cards+='\n                      <a href="https://bancopan.go.link/?\n                      adj_t=f17iqfk&adj_label=site-organico&adj_deeplink=br.com.bancopan.cartoes%\n                      3A%2F%2F%3Fmodule%3DLojaPan%26action%3DHomeMosaico" \n                      title="Link para cashback parceiro" \n                      class="swiper-slide card-estatico-parceiros-shopping__card pt-4" data-track="Shopping/'.concat(e.nomeLoja,"/").concat(e.cashback.replace(".0",""),'" target="_blank">\n                            <img class="card-estatico-parceiros-shopping__card-image \n                            image-default d-block mx-auto mb-3" src=\'').concat(e.logoUrl,'\' alt="Imagem de parceiro Banco PAN" loading="lazy" width="112px" height="112px">\n                            <div class="card-estatico-parceiros-shopping__card-flag \n                            d-flex align-items-center justify-content-center py-3">\n                                <p class="m-0">').concat(e.cashback.replace(".0",""),'% de cashback</p>\n                                <svg width="22" height="21" viewBox="0 0 22 21" fill="none"\n                                    xmlns="http://www.w3.org/2000/svg">\n                                    <path d="M1.60938 10.5H20.1808" stroke="white" stroke-width="1.8"\n                                        stroke-linecap="round" stroke-linejoin="round" />\n                                    <path d="M15.1807 15.5L20.1807 10.5L15.1807 5.5" stroke="white" stroke-width="1.8"\n                                        stroke-linecap="round" stroke-linejoin="round" />\n                                </svg>\n                            </div>\n                        </a>\n                      '),r.cardsContainer.innerHTML=r.cards}),this.totalPages=Math.ceil(n.totalItens/n.itensPagina),this.totalItensRest=n.totalItens%n.itensPagina,this.seeMoreButton.style.display="block",n.totalItens<=this.itemsPerPage&&(this.seeMoreButton.style.display="none"),[2]}})})},e.prototype.showErrorMessage=function(e){var t='\n            <div class="row d-flex align-items-center justify-content-center \n            card-estatico-parceiros-shopping__error-api">\n                <div class="col-9 col-lg-3">\n                    <img class="card-estatico-parceiros-shopping__error-img mb-3" \n                    src="/assets/img/error.svg" alt="ícone de erro">\n                    <p class="card-estatico-parceiros-shopping__text-error typography-large">'.concat(e,"</p>\n                </div>\n            </div>\n        ");this.seeMoreButton.style.display="none",this.cardsContainer.innerHTML=t},e}();t.default=r},4960:function(e,t,a){"use strict";a.r(t)},5672:function(e,t,a){var s=a(4960);"string"==typeof s&&(s=[[e.id,s,""]]);a(1023)(s,{});s.locals&&(e.exports=s.locals)}}]);