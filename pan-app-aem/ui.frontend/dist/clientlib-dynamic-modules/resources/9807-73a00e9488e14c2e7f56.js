"use strict";(self.webpackChunkwebapp_adobe_experience_ds=self.webpackChunkwebapp_adobe_experience_ds||[]).push([[8392,9807],{173:function(t,e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,o){function i(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,s)}c((r=r.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReCaptchaInstance=void 0;var a=function(){function t(t,e,n){this.siteKey=t,this.recaptchaID=e,this.recaptcha=n,this.styleContainer=null}return t.prototype.execute=function(t){return n(this,void 0,void 0,function(){var e;return r(this,function(n){switch(n.label){case 0:return this.recaptcha.enterprise?[4,this.recaptcha.enterprise.execute(this.recaptchaID,{action:t})]:[3,2];case 1:return e=n.sent(),[3,4];case 2:return[4,this.recaptcha.execute(this.recaptchaID,{action:t})];case 3:e=n.sent(),n.label=4;case 4:return[2,e]}})})},t.prototype.getSiteKey=function(){return this.siteKey},t.prototype.hideBadge=function(){null===this.styleContainer&&(this.styleContainer=document.createElement("style"),this.styleContainer.innerHTML=".grecaptcha-badge{visibility:hidden !important;}",document.head.appendChild(this.styleContainer))},t.prototype.showBadge=function(){null!==this.styleContainer&&(document.head.removeChild(this.styleContainer),this.styleContainer=null)},t}();e.ReCaptchaInstance=a},4461:function(t,e,n){var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.getInstance=e.load=void 0;var a,o=n(173);!function(t){t[t.NOT_LOADED=0]="NOT_LOADED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED"}(a||(a={}));var i=function(){function t(){}return t.load=function(e,n){if(void 0===n&&(n={}),"undefined"==typeof document)return Promise.reject(new Error("This is a library for the browser!"));if(t.getLoadingState()===a.LOADED)return t.instance.getSiteKey()===e?Promise.resolve(t.instance):Promise.reject(new Error("reCAPTCHA already loaded with different site key!"));if(t.getLoadingState()===a.LOADING)return e!==t.instanceSiteKey?Promise.reject(new Error("reCAPTCHA already loaded with different site key!")):new Promise(function(e,n){t.successfulLoadingConsumers.push(function(t){return e(t)}),t.errorLoadingRunnable.push(function(t){return n(t)})});t.instanceSiteKey=e,t.setLoadingState(a.LOADING);var r=new t;return new Promise(function(i,s){r.loadScript(e,n.useRecaptchaNet||!1,n.useEnterprise||!1,n.renderParameters?n.renderParameters:{},n.customUrl).then(function(){t.setLoadingState(a.LOADED);var s=r.doExplicitRender(grecaptcha,e,n.explicitRenderParameters?n.explicitRenderParameters:{},n.useEnterprise||!1),c=new o.ReCaptchaInstance(e,s,grecaptcha);t.successfulLoadingConsumers.forEach(function(t){return t(c)}),t.successfulLoadingConsumers=[],n.autoHideBadge&&c.hideBadge(),t.instance=c,i(c)}).catch(function(e){t.errorLoadingRunnable.forEach(function(t){return t(e)}),t.errorLoadingRunnable=[],s(e)})})},t.getInstance=function(){return t.instance},t.setLoadingState=function(e){t.loadingState=e},t.getLoadingState=function(){return null===t.loadingState?a.NOT_LOADED:t.loadingState},t.prototype.loadScript=function(e,n,r,o,i){var s=this;void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o={}),void 0===i&&(i="");var c=document.createElement("script");c.setAttribute("recaptcha-v3-script",""),c.setAttribute("async",""),c.setAttribute("defer","");var u="https://www.google.com/recaptcha/api.js";n?u=r?"https://recaptcha.net/recaptcha/enterprise.js":"https://recaptcha.net/recaptcha/api.js":r&&(u="https://www.google.com/recaptcha/enterprise.js"),i&&(u=i),o.render&&(o.render=void 0);var l=this.buildQueryString(o);return c.src=u+"?render=explicit"+l,new Promise(function(e,n){c.addEventListener("load",s.waitForScriptToLoad(function(){e(c)},r),!1),c.onerror=function(e){t.setLoadingState(a.NOT_LOADED),n(e)},document.head.appendChild(c)})},t.prototype.buildQueryString=function(t){return Object.keys(t).length<1?"":"&"+Object.keys(t).filter(function(e){return!!t[e]}).map(function(e){return e+"="+t[e]}).join("&")},t.prototype.waitForScriptToLoad=function(e,n){var r=this;return function(){void 0===window.grecaptcha?setTimeout(function(){r.waitForScriptToLoad(e,n)},t.SCRIPT_LOAD_DELAY):n?window.grecaptcha.enterprise.ready(function(){e()}):window.grecaptcha.ready(function(){e()})}},t.prototype.doExplicitRender=function(t,e,n,a){var o=r({sitekey:e},n);return n.container?a?t.enterprise.render(n.container,o):t.render(n.container,o):a?t.enterprise.render(o):t.render(o)},t.loadingState=null,t.instance=null,t.instanceSiteKey=null,t.successfulLoadingConsumers=[],t.errorLoadingRunnable=[],t.SCRIPT_LOAD_DELAY=25,t}();e.load=i.load,e.getInstance=i.getInstance},6590:function(t,e,n){e.Hh=void 0;var r=n(4461);Object.defineProperty(e,"Hh",{enumerable:!0,get:function(){return r.load}});var a=n(173)},8392:function(t,e,n){n.r(e),n.d(e,{NpsAtendimentoUrlParams:function(){return r}});var r=function(){function t(){this.$wrapperMainStream=document.querySelector("[data-js=nps-atendimento-fluxo-principal]"),this.$wrapperErroFlow=document.querySelector("[data-js=nps-atendimento-fluxo-erro]"),this.$flowAlreadyAnswered=document.querySelector("[data-js=nps-atendimento-fluxo-erro-respondida]"),this.$expiredLinkFlow=document.querySelector("[data-js=nps-atendimento-fluxo-erro-link-expirado]");var t=this.getUrlParams(),e=t.cpfParam,n=t.protocolParam;if(!e||!n)return this.$wrapperMainStream.classList.remove("d-flex"),this.$wrapperMainStream.classList.add("d-none"),this.$wrapperErroFlow.classList.remove("d-none"),this.$wrapperErroFlow.classList.add("d-flex"),void this.$expiredLinkFlow.classList.remove("d-none");this.cpfParam=e,this.protocolParam=n,this.protocolParam===localStorage.getItem("p")?(this.$wrapperMainStream.classList.remove("d-flex"),this.$wrapperMainStream.classList.add("d-none"),this.$wrapperErroFlow.classList.remove("d-none"),this.$wrapperErroFlow.classList.add("d-flex"),this.$flowAlreadyAnswered.classList.remove("d-none")):(this.protocolParam=localStorage.getItem("p"),this.protocolParam=n,this.$wrapperErroFlow.classList.add("d-none"),this.$wrapperMainStream.classList.remove("d-none"),this.$wrapperMainStream.classList.add("d-flex"))}return t.prototype.getUrlParams=function(){var t=new URLSearchParams(window.location.search);return{cpfParam:t.get("c"),protocolParam:t.get("p")}},t.prototype.storeParamsLocally=function(){this.cpfParam&&this.protocolParam&&(localStorage.setItem("c",this.cpfParam),localStorage.setItem("p",this.protocolParam))},t}()},9807:function(t,e,n){n.r(e),n.d(e,{NpsAtendimentoSendData:function(){return s}});var r=n(8392),a=n(6590),o=function(t,e,n,r){return new(n||(n=Promise))(function(a,o){function i(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,s)}c((r=r.apply(t,e||[])).next())})},i=function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},s=function(){function t(){var t=this;this.recaptchaResponse="",this.$npsAtendimentoEndPoint=document.querySelector("[data-js=nps-endpoint-input]"),this.urlParamsCpf=new URLSearchParams(window.location.search),this.urlParamsProtocol=new URLSearchParams(window.location.search),this.urlParamansUtmSource=new URLSearchParams(window.location.search),this.origemPesquisa=window.location.origin+window.location.pathname,this.$npsTestimonyValue=document.querySelector("[data-js=nps-atendimento-depoimento]"),this.$wrapperErroFlow=document.querySelector("[data-js=nps-atendimento-fluxo-erro]"),this.$wrapperMainStream=document.querySelector("[data-js=nps-atendimento-fluxo-principal]"),this.$wrapperTestimony=document.querySelector(".nps-atendimento__wrapper-testimony"),this.$wrapperSuccess=document.querySelector(".nps-atendimento__wrapper-success"),this.$flowErrorResquest=document.querySelector("[data-js=nps-atendimento-fluxo-erro-manutencao]"),this.$nextStep1Button=document.querySelector("[data-js=nps-atendimento-button-step-1]"),this.$nextStep2Button=document.querySelector("[data-js=nps-atendimento-button-step-2]"),this.$finishQuizButton=document.querySelector("[data-js=nps-atendimento-button-submit]"),this.$botaoSim=document.querySelector("[data-js=nps-atendimento-botao-sim]"),this.$botaoNao=document.querySelector("[data-js=nps-atendimento-botao-nao]"),this.$npsScoreButtons=document.querySelectorAll(".nps-atendimento__score-list > .nps-atendimento__score-list-item > button"),this.$formLeadVersion=document.querySelector("[data-js=nps-captcha-version]"),this.$formLeadSiteKey=document.querySelector("[data-js=nps-captcha-siteKey]"),this.handleSubmit=function(){t.$finishQuizButton.setAttribute("data-track",t.nextStep3Tracker+(t.$npsTestimony?"ComTexto":"SemTexto")),t.isCaptchaValid&&(t.$finishQuizButton.querySelector("button").innerText="Enviando...",t.sendFormData())},this.choiceScore=function(){t.$npsScoreButtons.forEach(function(e){e.addEventListener("click",function(){t.$npsScoreButtons.forEach(function(t){t.classList.remove("active")}),t.$npsScore=e.value,t.$nextStep2Button.setAttribute("data-track",t.nextStep2Tracker+t.$npsScore),t.$nextStep2Button.setAttribute("disabled","false"),e.classList.add("active")})})},this.changeBotaoBoleanoState=function(e,n,r){t.$yesOrNoQuestion=e,t.$nextStep1Button.setAttribute("data-track",t.nextStep1Tracker+(1==t.$yesOrNoQuestion?"Sim":"Nao")),n.setAttribute("variant","primary"),r.setAttribute("variant","secondary"),t.$nextStep1Button.setAttribute("disabled","false")},this.getTestimonyValue=function(){t.$npsTestimony=t.$npsTestimonyValue.querySelector("textarea").value},this.npsAtendimentoUrlParamns=new r.NpsAtendimentoUrlParams,setTimeout(function(){t.getCaptchaToken(),t.initFormEvent()},1e3)}return t.prototype.getCaptchaToken=function(){var t;return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,(0,a.Hh)(null===(t=this.$formLeadSiteKey)||void 0===t?void 0:t.value,{useEnterprise:!0})];case 1:return[4,n.sent().execute("SIGNUP")];case 2:return e=n.sent(),this.recaptchaResponse=e,e&&(this.isCaptchaValid=!0),[2]}})})},t.prototype.initFormEvent=function(){var t=this;this.nextStep1Tracker=this.$nextStep1Button.getAttribute("data-track"),this.nextStep2Tracker=this.$nextStep2Button.getAttribute("data-track"),this.nextStep3Tracker=this.$finishQuizButton.getAttribute("data-track"),this.$botaoSim.querySelector("button").addEventListener("click",function(e){e.preventDefault(),t.changeBotaoBoleanoState(!0,t.$botaoSim,t.$botaoNao)}),this.$botaoNao.querySelector("button").addEventListener("click",function(e){e.preventDefault(),t.changeBotaoBoleanoState(!1,t.$botaoNao,t.$botaoSim)}),this.$finishQuizButton.addEventListener("click",function(e){e.preventDefault(),t.handleSubmit()}),this.$npsTestimonyValue.querySelector("textarea").addEventListener("blur",function(){t.getTestimonyValue()}),this.choiceScore()},t.prototype.sendFormData=function(){var t,e=this,n=this.$npsAtendimentoEndPoint.value,r=this.urlParamansUtmSource.get("utm_source")?this.urlParamansUtmSource.get("utm_source"):"sem utm source",a={CPF:this.urlParamsCpf.get("c"),COMENTARIO:this.$npsTestimony,NOTA:this.$npsScore,SOLIC_RESOLVIDA:this.$yesOrNoQuestion,PROTOCOLO:this.urlParamsProtocol.get("p"),URL_ORIGEM:this.origemPesquisa,ORIGEM:r},o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Authorization-Captcha":this.recaptchaResponse,SiteKey:null===(t=this.$formLeadSiteKey)||void 0===t?void 0:t.value},body:JSON.stringify(a)};fetch(n,o).then(function(t){t.status>=200&&t.status<400?e.handleSuccess():e.handleError()}).catch(function(){e.handleError()})},t.prototype.handleSuccess=function(){this.$wrapperSuccess.classList.add("nps-atendimento__success"),this.$wrapperTestimony.classList.add("nps-atendimento__success"),this.npsAtendimentoUrlParamns.storeParamsLocally()},t.prototype.handleError=function(){this.$wrapperMainStream.classList.add("d-none"),this.$wrapperErroFlow.classList.remove("d-none"),this.$flowErrorResquest.classList.remove("d-none")},t}()}}]);